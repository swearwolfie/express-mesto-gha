ПЛАН ПК14

1. Добавьте email и password к схеме пользователя ++++++
2. Доработайте контроллер createUser ++++++
3. Создайте контроллер login !!
4. Создайте роут для логина и регистрации ++++++
5. Сделайте мидлвэр для авторизации
6. Создайте контроллер и роут для получения информации о пользователе
7. Защитите API авторизацией
8. Удалите хардкод
9. Проконтролируйте права
10. Сделайте так, чтобы API не возвращал хеш пароля ++++++

+
1. Реализуйте централизованную обработку ошибок
12. Код успешного ответа ! 
2. Валидируйте приходящие на сервер запросы
3. (опц) вынести ошибку 500 в отдельный мидлвар, // у Маши на вебинаре пример на 1:07:07



// старая версия парсера
/* app.use(bodyParser.json());
app.use(bodyParser.urlencoded({ extended: true })); */

будущие плюшки для 14 спринта ??

/*
const { celebrate, Joi } = require('celebrate'); библиотека для валидации данных
const cookieParser = require('cookie-parser'); тул для печенье-чтения // app.use(cookieParser());
const escape = require('escape-html'); тул для экранирования
*/

app.use(cookieParser());

app.get('/posts', (req, res) => {
  console.log(req.cookies.jwt); // достаём токен
}); 



попробовать в будущем штуки от ревьюера:

Для улучшения структуры и упрощения масштабирования приложения рекомендую создать корневой роутер в routes/index.js и подключить к нему все роутеры и обработчики. После этого подключить этот корневой роутер в app.js.

Будет очень круто, если вы используете оператор instanceof для определения принадлежности экземпляра ошибки к определенному классу. Подробнее про этот полезный оператор вы можете прочитать в документации от Mozilla. Классы ошибок БД можно найти в объекте mongoose.Error.

Считаю, что вам по силам ещё один важный рефакторинг. Попробуйте вынести общую логику из контроллеров для обновления данных пользователя. Небольшая подсказка: На выходе у вас должна получится одна большая функция с общей логикой и две маленькие — функции-декораторы, которые будут выполнять роль контроллеров. 
